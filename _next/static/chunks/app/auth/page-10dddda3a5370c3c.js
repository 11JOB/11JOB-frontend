(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[365],{2773:(e,t,a)=>{Promise.resolve().then(a.bind(a,5763))},5763:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>k});var s=a(5155),r=a(2115),l=a(7828),n=a(532),o=a(368),i=a(2821);let c=a(5125).A.create({baseURL:"https://11job.site",headers:{"Content-Type":"application/json"},timeout:1e4});async function d(e){await c.post("/api/user/join",e)}async function u(e){await c.post("/api/user/emailSend",e)}async function x(e){await c.post("/api/user/emailCheck",e)}async function h(e){var t,a,s,r,l,n;let o=await c.post("/login",e);console.log("Login response (headers / data):",{headers:o.headers,data:o.data});let i=(null==(t=o.data)?void 0:t.accessToken)||(null==(s=o.data)||null==(a=s.data)?void 0:a.accessToken),d=(null==(r=o.data)?void 0:r.refreshToken)||(null==(n=o.data)||null==(l=n.data)?void 0:l.refreshToken);if(!i){let e=o.headers.authorization||o.headers.Authorization;(null==e?void 0:e.startsWith("Bearer "))&&(i=e.slice(7))}if(d||(d=o.headers["refresh-token"]||o.headers.refresh||""),!i||!d)throw console.error("예상과 다른 로그인 응답:",{headers:o.headers,data:o.data}),Error("로그인 응답 데이터가 올바르지 않습니다.");return{accessToken:i,refreshToken:d}}c.interceptors.request.use(e=>{let t=localStorage.getItem("token");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));var m=a(63);let g=e=>{let{onClick:t,children:a,disabled:r=!1,type:l="button",className:n}=e;return(0,s.jsx)("button",{type:l,onClick:t,disabled:r,className:(0,i.A)("w-full rounded-xl h-12 font-semibold text-white transition-colors duration-150",r?"bg-gray-400 cursor-not-allowed":"bg-black hover:bg-neutral-800 active:bg-neutral-900",n),children:a})},b=e=>{let{value:t,onChange:a,placeholder:r,type:l="text",className:n,readOnly:o=!1}=e;return(0,s.jsx)("input",{type:l,value:t,onChange:a,placeholder:r,readOnly:o,className:(0,i.A)("w-full h-12 rounded-xl border border-gray-300 bg-white px-4 text-gray-800","placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-neutral-800","transition-colors duration-150",{"bg-gray-100":o},n)})},p=e=>{let{value:t,onChange:a,placeholder:o,className:c}=e,[d,u]=(0,r.useState)(!1);return(0,s.jsxs)("div",{className:"relative w-full",children:[(0,s.jsx)("input",{type:d?"text":"password",value:t,onChange:a,placeholder:o,className:(0,i.A)("w-full h-12 rounded-xl border border-gray-300 bg-white px-4 pr-10 text-gray-800","placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-neutral-800 focus:border-neutral-800","transition-colors duration-150",c)}),(0,s.jsx)("button",{type:"button",onClick:()=>u(!d),className:"absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:d?(0,s.jsx)(l.A,{size:18}):(0,s.jsx)(n.A,{size:18})})]})},y=e=>{let{title:t,onBack:a,showBack:r}=e;return(0,s.jsxs)("div",{className:"relative text-center mb-8",children:[r&&(0,s.jsx)("button",{onClick:a,className:"absolute left-0 top-1/2 -translate-y-1/2 p-1 text-gray-600 hover:text-black transition",children:(0,s.jsx)(o.A,{size:24})}),(0,s.jsx)("h1",{className:"text-2xl font-bold tracking-tight text-gray-900",children:t})]})},j=e=>{let{onBack:t}=e,[a,l]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),[c,h]=(0,r.useState)(""),[m,j]=(0,r.useState)(""),[f,v]=(0,r.useState)(""),[k,N]=(0,r.useState)(!1),[w,S]=(0,r.useState)(!1),[C,A]=(0,r.useState)(!1),B=(0,r.useMemo)(()=>c.length>=8&&c===m,[c,m]),T=(0,r.useMemo)(()=>a.trim().includes("@")&&!w,[a,w]),z=(0,r.useMemo)(()=>""!==n.trim()&&w,[n,w]),M=(0,r.useMemo)(()=>""!==a.trim()&&C&&B&&""!==f.trim()&&k,[a,C,B,f,k]),_=async()=>{if(T)try{await u({email:a}),S(!0),alert("[".concat(a,"]로 인증번호가 발송되었습니다."))}catch(e){console.error("Failed to send email:",e),alert("이메일 발송에 실패했습니다. 다시 시도해주세요.")}},E=async()=>{if(z)try{await x({email:a,authNum:n}),A(!0),alert("인증번호가 확인되었습니다.")}catch(e){console.error("Verification failed:",e),alert("인증번호가 올바르지 않습니다. 다시 확인해주세요.")}},I=async e=>{if(e.preventDefault(),M)try{await d({email:a,password:c,name:f}),alert("회원가입이 성공적으로 완료되었습니다."),t()}catch(e){console.error("Sign up failed:",e),alert("회원가입에 실패했습니다. 다시 시도해주세요.")}};return(0,s.jsxs)("div",{className:"rounded-2xl bg-white shadow-xl ring-1 ring-gray-100 p-8 w-full transition-opacity duration-300",children:[(0,s.jsx)(y,{title:"회원가입",onBack:t,showBack:!0}),(0,s.jsxs)("form",{onSubmit:I,className:"space-y-5",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"아이디(이메일)"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b,{value:a,onChange:e=>l(e.target.value),placeholder:"이메일 주소를 입력해주세요",type:"email",readOnly:w}),(0,s.jsx)("button",{type:"button",onClick:_,disabled:!T,className:(0,i.A)("whitespace-nowrap px-4 rounded-xl text-sm font-semibold transition-colors duration-150",T?"bg-indigo-600 text-white hover:bg-indigo-700":"bg-gray-300 text-gray-600 cursor-not-allowed"),children:w?"재전송":"인증번호 발송"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"이메일 인증번호 입력"}),(0,s.jsxs)("div",{className:"flex gap-2",children:[(0,s.jsx)(b,{value:n,onChange:e=>o(e.target.value),placeholder:"이메일 인증번호 6자리를 입력해주세요",type:"text",className:"appearance-none"}),(0,s.jsx)("button",{type:"button",onClick:E,disabled:!z,className:(0,i.A)("whitespace-nowrap px-4 rounded-xl text-sm font-semibold transition-colors duration-150",z?"bg-green-600 text-white hover:bg-green-700":"bg-gray-300 text-gray-600 cursor-not-allowed"),children:"인증번호 확인"})]})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"비밀번호 (8자 이상)"}),(0,s.jsx)(p,{value:c,onChange:e=>h(e.target.value),placeholder:"비밀번호를 입력해주세요"}),c.length>0&&c.length<8&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:"비밀번호는 최소 8자 이상이어야 합니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"비밀번호 확인"}),(0,s.jsx)(p,{value:m,onChange:e=>j(e.target.value),placeholder:"비밀번호를 다시 입력해주세요"}),!B&&m.length>0&&(0,s.jsx)("p",{className:"mt-1 text-xs text-red-500",children:"비밀번호가 일치하지 않습니다."})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"이름"}),(0,s.jsx)(b,{value:f,onChange:e=>v(e.target.value),placeholder:"이름을 입력해주세요",type:"text"})]}),(0,s.jsxs)("label",{className:"flex items-center gap-2 text-sm text-gray-700 select-none",children:[(0,s.jsx)("input",{type:"checkbox",className:"h-4 w-4 rounded border-gray-300 text-black focus:ring-black",checked:k,onChange:e=>N(e.target.checked)}),"개인정보 이용 및 수집 동의"]}),(0,s.jsx)("div",{className:"pt-2",children:(0,s.jsx)(g,{type:"submit",disabled:!M,className:(0,i.A)({"bg-black":M}),children:"회원가입"})})]})]})},f=e=>{let{onBack:t}=e,[a,l]=(0,r.useState)(""),n=(0,r.useMemo)(()=>a.trim().includes("@"),[a]);return(0,s.jsxs)("div",{className:"rounded-2xl bg-white shadow-xl ring-1 ring-gray-100 p-8 w-full transition-opacity duration-300",children:[(0,s.jsx)(y,{title:"비밀번호 재설정",onBack:t,showBack:!0}),(0,s.jsx)("p",{className:"text-gray-600 mb-6 text-left text-sm",children:"가입 시 사용했던 이메일 주소를 입력해주세요. 비밀번호 재설정 링크를 보내드립니다."}),(0,s.jsxs)("form",{onSubmit:e=>{e.preventDefault(),n&&(console.log("Reset Password for:",a),alert("[".concat(a,"]로 비밀번호 재설정 이메일이 전송되었습니다. (시뮬레이션)")),t())},className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700 text-left",children:"이메일"}),(0,s.jsx)(b,{value:a,onChange:e=>l(e.target.value),placeholder:"이메일 주소를 입력해주세요",type:"email"})]}),(0,s.jsx)(g,{type:"submit",disabled:!n,className:(0,i.A)({"bg-black":n}),children:"재설정 이메일 받기"})]})]})},v=e=>{let{handleNavigation:t}=e,[a,l]=(0,r.useState)(""),[n,o]=(0,r.useState)(""),c=(0,m.useRouter)(),d=(0,r.useMemo)(()=>""!==a.trim()&&""!==n.trim(),[a,n]),u=async e=>{if(e.preventDefault(),d)try{console.log("Sending login request with:",{email:a,password:n});let{accessToken:e,refreshToken:t}=await h({email:a,password:n});console.log("Login successful. Tokens:",{accessToken:e,refreshToken:t}),localStorage.setItem("accessToken",e),localStorage.setItem("refreshToken",t),localStorage.setItem("userEmail",a),alert("로그인 성공"),c.push("/")}catch(e){console.error("Login failed:",e),alert("로그인에 실패했습니다. 이메일과 비밀번호를 확인해주세요.")}};return(0,s.jsxs)("div",{className:"rounded-2xl bg-white shadow-xl ring-1 ring-gray-100 p-8 w-full transition-opacity duration-300",children:[(0,s.jsx)(y,{title:"로그인",onBack:()=>{},showBack:!1}),(0,s.jsxs)("form",{onSubmit:u,className:"space-y-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"아이디(이메일)"}),(0,s.jsx)(b,{value:a,onChange:e=>l(e.target.value),placeholder:"아이디를 입력해주세요",type:"email"})]}),(0,s.jsxs)("div",{children:[(0,s.jsx)("label",{className:"mb-2 block text-sm font-semibold text-gray-700",children:"비밀번호"}),(0,s.jsx)(p,{value:n,onChange:e=>o(e.target.value),placeholder:"비밀번호를 입력해주세요"})]}),(0,s.jsx)(g,{type:"submit",disabled:!d,className:(0,i.A)({"bg-black":d}),children:"로그인"})]}),(0,s.jsxs)("div",{className:"mt-6 text-center text-sm space-x-2",children:[(0,s.jsx)("span",{className:"text-gray-600 hover:text-black cursor-pointer transition duration-150 font-medium",onClick:()=>t("signup"),children:"회원가입"}),(0,s.jsx)("span",{className:"text-gray-400",children:"|"}),(0,s.jsx)("span",{className:"text-gray-600 hover:text-black cursor-pointer transition duration-150 font-medium",onClick:()=>t("reset"),children:"비밀번호 찾기"})]})]})};function k(){let[e,t]=(0,r.useState)("signin"),a=e=>{t(e)};return(0,s.jsx)("div",{className:"min-h-screen bg-gray-50 font-sans",children:(0,s.jsx)("main",{className:"px-4",children:(0,s.jsx)("div",{className:"mx-auto max-w-md",children:(0,s.jsx)("div",{className:"flex flex-col justify-center min-h-screen py-8 md:py-12",children:(()=>{switch(e){case"signin":return(0,s.jsx)(v,{handleNavigation:a});case"signup":return(0,s.jsx)(j,{onBack:()=>a("signin")});case"reset":return(0,s.jsx)(f,{onBack:()=>a("signin")});default:return null}})()})})})})}}},e=>{e.O(0,[803,441,255,358],()=>e(e.s=2773)),_N_E=e.O()}]);