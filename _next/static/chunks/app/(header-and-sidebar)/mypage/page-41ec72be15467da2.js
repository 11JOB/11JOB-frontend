(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{130:(e,s,t)=>{"use strict";t.d(s,{J3:()=>u,Ro:()=>o,ZM:()=>l,ec:()=>i,fj:()=>r,hG:()=>d,iD:()=>n,ri:()=>c});var a=t(3490);async function r(e){await a.A.post("/api/user/join",e)}async function l(e){await a.A.post("/api/user/emailSend",e)}async function o(e){await a.A.post("/api/user/emailCheck",e)}async function n(e){let s=await a.A.post("/login",e),t=s.data.accessToken,r=s.data.refreshToken;return localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",r),{accessToken:t,refreshToken:r}}async function c(){await a.A.post("/api/user/logout")}async function i(e){await a.A.patch("/api/user/change-password",e)}async function d(e){console.log("\uD83D\uDCE4 [deleteUser] 요청 전송:",e);try{let s=await a.A.delete("/api/user/delete-user",{data:e});return console.log("\uD83D\uDCE5 [deleteUser] 응답 수신:",s),s.data}catch(e){var s,t;throw console.error("❌ [deleteUser] API 호출 오류:"),console.error("   ▶ status:",null==(s=e.response)?void 0:s.status),console.error("   ▶ response.data:",null==(t=e.response)?void 0:t.data),console.error("   ▶ full error:",e),e}}async function u(){return(await a.A.get("/api/user/name")).data}},368:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},508:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3490:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});let a=t(5125).A.create({baseURL:"https://11job.site",headers:{"Content-Type":"application/json"},timeout:1e4});a.interceptors.request.use(e=>{let s=localStorage.getItem("accessToken");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e));let r=a},4926:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},6168:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>x});var a=t(5155),r=t(2115),l=t(508),o=t(4926),n=t(368),c=t(1847);let i=(0,c.A)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),d=(0,c.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=t(130);function x(){let[e,s]=(0,r.useState)(""),[t,c]=(0,r.useState)(""),[x,h]=(0,r.useState)(""),[m,p]=(0,r.useState)(""),[f,g]=(0,r.useState)(""),[y,b]=(0,r.useState)(!1),[j,w]=(0,r.useState)(""),[v,N]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,u.J3)();s(e)}catch(e){console.error("❌ 사용자 이름 조회 실패:",e),s("알 수 없는 사용자")}{let e=localStorage.getItem("userEmail");e&&c(e)}})()},[]);let S=async()=>{if(confirm("정말 로그아웃 하시겠습니까?"))try{A(!0),await (0,u.ri)(),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userEmail"),alert("로그아웃되었습니다."),window.location.href="/"}catch(e){console.error("❌ 로그아웃 실패:",e),alert("로그아웃에 실패했습니다. 잠시 후 다시 시도해 주세요.")}finally{A(!1)}},C=async()=>{if(!x||!m||!f)return void alert("현재 비밀번호와 새 비밀번호를 모두 입력해주세요.");if(m!==f)return void alert("새 비밀번호와 비밀번호 확인이 일치하지 않습니다.");if(m.length<8)return void alert("새 비밀번호는 최소 8자 이상이어야 합니다.");try{b(!0),await (0,u.ec)({oldPassword:x,newPassword:m}),alert("비밀번호가 성공적으로 변경되었습니다."),h(""),p(""),g("")}catch(e){console.error("❌ 비밀번호 변경 실패:",e),alert("비밀번호 변경에 실패했습니다. 현재 비밀번호를 다시 확인해 주세요.")}finally{b(!1)}},U=async()=>{if(console.log("⚡ [handleDeleteUser] 실행됨"),console.log("입력된 비밀번호:",j),!j)return void alert("회원 탈퇴를 위해 비밀번호를 입력해주세요.");if(confirm("정말로 회원 탈퇴를 진행하시겠습니까?\n\n계정과 관련된 데이터가 삭제될 수 있습니다."))try{N(!0),console.log("\uD83D\uDCE4 [handleDeleteUser] deleteUser 요청 보냄");let e=await (0,u.hG)({password:j});if(console.log("\uD83D\uDCE5 [handleDeleteUser] deleteUser 응답:",e),!e.success)return void alert(e.message||"회원 탈퇴 실패");alert(e.message||"회원 탈퇴 완료"),localStorage.clear(),window.location.href="/"}catch(e){console.error("❌ [handleDeleteUser] 오류:",e),alert("회원 탈퇴 실패. 비밀번호를 다시 확인해주세요.")}finally{N(!1)}},I=e?e.charAt(0).toUpperCase():"?";return(0,a.jsx)("div",{className:"flex-1 min-h-screen bg-gray-50 font-sans",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto py-10 px-4 sm:px-6 lg:px-0 space-y-8",children:[(0,a.jsxs)("header",{className:"border-b pb-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-extrabold text-gray-900 flex items-center",children:[(0,a.jsx)(l.A,{className:"w-7 h-7 mr-3 text-blue-500"}),"마이페이지"]}),(0,a.jsx)("p",{className:"text-base text-gray-500 mt-1",children:"회원 정보 확인 및 비밀번호 변경, 회원 탈퇴를 관리할 수 있습니다."})]}),(0,a.jsxs)("section",{className:"flex items-center space-x-4 bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-bold",children:I}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e||"로그인 사용자"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:t||"이메일 정보가 없습니다."})]})]}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"계정 관리"}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 divide-y divide-gray-100",children:(0,a.jsxs)("button",{className:"w-full text-left flex items-center justify-between p-4 text-red-600 hover:bg-red-50 transition duration-150 rounded-xl",onClick:S,disabled:k,children:[(0,a.jsxs)("span",{className:"flex items-center font-semibold",children:[(0,a.jsx)(o.A,{className:"w-5 h-5 mr-3 text-red-500"}),k?"로그아웃 중...":"로그아웃"]}),(0,a.jsx)(n.A,{className:"w-4 h-4 transform rotate-180 text-red-400"})]})})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"비밀번호 변경"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"현재 비밀번호를 입력한 뒤, 새 비밀번호를 설정해주세요."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"현재 비밀번호"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:x,onChange:e=>h(e.target.value),placeholder:"현재 비밀번호를 입력하세요"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"새 비밀번호"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:m,onChange:e=>p(e.target.value),placeholder:"새 비밀번호를 입력하세요 (최소 8자)"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"새 비밀번호 확인"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:f,onChange:e=>g(e.target.value),placeholder:"다시 한 번 입력해주세요"})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"button",onClick:C,disabled:y,className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-60",children:y?"변경 중...":"비밀번호 변경"})})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d,{className:"w-5 h-5 text-red-500"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-red-700",children:"회원 탈퇴"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"회원 탈퇴를 진행하면 계정과 관련된 데이터가 삭제되거나 복구가 어려울 수 있습니다. 신중하게 진행해주세요."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"비밀번호 확인"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400",value:j,onChange:e=>w(e.target.value),placeholder:"현재 비밀번호를 입력하세요"}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"button",onClick:U,disabled:v,className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold text-white bg-red-600 hover:bg-red-700 disabled:opacity-60",children:v?"탈퇴 처리 중...":"회원 탈퇴"})})]})]})]})})}},8448:(e,s,t)=>{Promise.resolve().then(t.bind(t,6168))}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=8448)),_N_E=e.O()}]);