(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{130:(e,s,t)=>{"use strict";t.d(s,{J3:()=>u,Ro:()=>n,ZM:()=>r,ec:()=>i,fj:()=>l,hG:()=>d,iD:()=>o,ri:()=>c});var a=t(3490);async function l(e){await a.A.post("/api/user/join",e)}async function r(e){await a.A.post("/api/user/emailSend",e)}async function n(e){await a.A.post("/api/user/emailCheck",e)}async function o(e){let s=await a.A.post("/login",e),t=s.data.accessToken,l=s.data.refreshToken;return localStorage.setItem("accessToken",t),localStorage.setItem("refreshToken",l),{accessToken:t,refreshToken:l}}async function c(){await a.A.post("/api/user/logout")}async function i(e){await a.A.patch("/api/user/change-password",e)}async function d(e){console.log("\uD83D\uDCE4 [deleteUser] 요청 전송:",e);try{let s=await a.A.delete("/api/user/delete-user",{data:e});return console.log("\uD83D\uDCE5 [deleteUser] 응답 수신:",s),s.data}catch(e){var s,t;throw console.error("❌ [deleteUser] API 호출 오류:"),console.error("   ▶ status:",null==(s=e.response)?void 0:s.status),console.error("   ▶ response.data:",null==(t=e.response)?void 0:t.data),console.error("   ▶ full error:",e),e}}async function u(){return(await a.A.get("/api/user/name")).data}},368:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},508:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3490:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});let a=t(5125).A.create({baseURL:"https://11job.site",headers:{"Content-Type":"application/json"},timeout:1e4});a.interceptors.request.use(e=>{let s=localStorage.getItem("accessToken");return s&&(e.headers.Authorization="Bearer ".concat(s)),e},e=>Promise.reject(e));let l=a},4926:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});let a=(0,t(1847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},6168:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>m});var a=t(5155),l=t(2115),r=t(508),n=t(4926),o=t(368),c=t(1847);let i=(0,c.A)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),d=(0,c.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=t(130),x=t(9370);function m(){(0,l.useEffect)(()=>{localStorage.getItem("accessToken")||(window.location.href="/auth")},[]);let[e,s]=(0,l.useState)(""),[t,c]=(0,l.useState)(""),[m,h]=(0,l.useState)(""),[p,f]=(0,l.useState)(""),[g,y]=(0,l.useState)(""),[b,j]=(0,l.useState)(!1),[w,v]=(0,l.useState)(""),[N,k]=(0,l.useState)(!1),[A,S]=(0,l.useState)(!1),[C,U]=(0,l.useState)(""),[I,T]=(0,l.useState)(!1),E=e=>{U(e),T(!0)};(0,l.useEffect)(()=>{(async()=>{try{let e=await (0,u.J3)();s(e)}catch(e){console.error("❌ 사용자 이름 조회 실패:",e),s("알 수 없는 사용자")}{let e=localStorage.getItem("userEmail");e&&c(e)}})()},[]);let M=async()=>{if(confirm("정말 로그아웃 하시겠습니까?"))try{S(!0),await (0,u.ri)(),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userEmail"),E("로그아웃되었습니다."),window.location.href="/"}catch(e){console.error("❌ 로그아웃 실패:",e),E("로그아웃에 실패했습니다. 잠시 후 다시 시도해 주세요.")}finally{S(!1)}},_=async()=>{if(!m||!p||!g)return void E("현재 비밀번호와 새 비밀번호를 모두 입력해주세요.");if(p!==g)return void E("새 비밀번호와 비밀번호 확인이 일치하지 않습니다.");if(p.length<8)return void E("새 비밀번호는 최소 8자 이상이어야 합니다.");try{j(!0),await (0,u.ec)({oldPassword:m,newPassword:p}),E("비밀번호가 성공적으로 변경되었습니다."),h(""),f(""),y("")}catch(e){console.error("❌ 비밀번호 변경 실패:",e),E("비밀번호 변경에 실패했습니다. 현재 비밀번호를 다시 확인해 주세요.")}finally{j(!1)}},D=async()=>{if(console.log("⚡ [handleDeleteUser] 실행됨"),console.log("입력된 비밀번호:",w),!w)return void E("회원 탈퇴를 위해 비밀번호를 입력해주세요.");if(confirm("정말로 회원 탈퇴를 진행하시겠습니까?\n\n계정과 관련된 데이터가 삭제될 수 있습니다."))try{k(!0),console.log("\uD83D\uDCE4 [handleDeleteUser] deleteUser 요청 보냄");let e=await (0,u.hG)({password:w});if(console.log("\uD83D\uDCE5 [handleDeleteUser] deleteUser 응답:",e),!e.success)return void E(e.message||"회원 탈퇴 실패");E(e.message||"회원 탈퇴 완료"),localStorage.clear(),window.location.href="/"}catch(e){console.error("❌ [handleDeleteUser] 오류:",e),E("회원 탈퇴 실패. 비밀번호를 다시 확인해주세요.")}finally{k(!1)}},z=e?e.charAt(0).toUpperCase():"?";return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(x.A,{isOpen:I,onClose:()=>T(!1),message:C}),(0,a.jsx)("div",{className:"flex-1 min-h-screen bg-gray-50 font-sans",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto py-10 px-4 sm:px-6 lg:px-0 space-y-8",children:[(0,a.jsxs)("header",{className:"border-b pb-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-extrabold text-gray-900 flex items-center",children:[(0,a.jsx)(r.A,{className:"w-7 h-7 mr-3 text-blue-500"}),"마이페이지"]}),(0,a.jsx)("p",{className:"text-base text-gray-500 mt-1",children:"회원 정보 확인 및 비밀번호 변경, 회원 탈퇴를 관리할 수 있습니다."})]}),(0,a.jsxs)("section",{className:"flex items-center space-x-4 bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-bold",children:z}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e||"로그인 사용자"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:t||"이메일 정보가 없습니다."})]})]}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"계정 관리"}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 divide-y divide-gray-100",children:(0,a.jsxs)("button",{className:"w-full text-left flex items-center justify-between p-4 text-red-600 hover:bg-red-50 transition duration-150 rounded-xl",onClick:M,disabled:A,children:[(0,a.jsxs)("span",{className:"flex items-center font-semibold",children:[(0,a.jsx)(n.A,{className:"w-5 h-5 mr-3 text-red-500"}),A?"로그아웃 중...":"로그아웃"]}),(0,a.jsx)(o.A,{className:"w-4 h-4 transform rotate-180 text-red-400"})]})})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"비밀번호 변경"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"현재 비밀번호를 입력한 뒤, 새 비밀번호를 설정해주세요."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"현재 비밀번호"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:m,onChange:e=>h(e.target.value),placeholder:"현재 비밀번호를 입력하세요"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"새 비밀번호"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:p,onChange:e=>f(e.target.value),placeholder:"새 비밀번호를 입력하세요 (최소 8자)"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"새 비밀번호 확인"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:g,onChange:e=>y(e.target.value),placeholder:"다시 한 번 입력해주세요"})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"button",onClick:_,disabled:b,className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-60",children:b?"변경 중...":"비밀번호 변경"})})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d,{className:"w-5 h-5 text-red-500"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-red-700",children:"회원 탈퇴"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"회원 탈퇴를 진행하면 계정과 관련된 데이터가 삭제되거나 복구가 어려울 수 있습니다. 신중하게 진행해주세요."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"비밀번호 확인"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400",value:w,onChange:e=>v(e.target.value),placeholder:"현재 비밀번호를 입력하세요"}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"button",onClick:D,disabled:N,className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold text-white bg-red-600 hover:bg-red-700 disabled:opacity-60",children:N?"탈퇴 처리 중...":"회원 탈퇴"})})]})]})]})})]})}},8448:(e,s,t)=>{Promise.resolve().then(t.bind(t,6168))},9370:(e,s,t)=>{"use strict";t.d(s,{A:()=>l});var a=t(5155);function l(e){let{isOpen:s,message:t,onClose:l}=e;return s?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,a.jsxs)("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-2xl p-6 animate-fadeIn scale-100",children:[(0,a.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"알림"}),(0,a.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-line",children:t}),(0,a.jsx)("div",{className:"mt-6 flex justify-end",children:(0,a.jsx)("button",{onClick:l,className:"px-4 py-2 rounded-lg bg-gray-600 text-white font-semibold text-sm shadow-md hover:bg-gray-700 active:scale-95 transition-all",children:"닫기"})})]})}):null}}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=8448)),_N_E=e.O()}]);