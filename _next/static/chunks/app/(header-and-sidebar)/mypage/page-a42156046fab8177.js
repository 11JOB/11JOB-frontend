(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[276],{130:(e,t,s)=>{"use strict";s.d(t,{J3:()=>u,Ro:()=>c,ZM:()=>l,ec:()=>i,fj:()=>r,hG:()=>d,iD:()=>n,ri:()=>o});var a=s(3490);async function r(e){await a.A.post("/api/user/join",e)}async function l(e){await a.A.post("/api/user/emailSend",e)}async function c(e){await a.A.post("/api/user/emailCheck",e)}async function n(e){let t=await a.A.post("/login",e),s=t.data.accessToken,r=t.data.refreshToken;return localStorage.setItem("accessToken",s),localStorage.setItem("refreshToken",r),{accessToken:s,refreshToken:r}}async function o(){await a.A.post("/api/user/logout")}async function i(e){await a.A.patch("/api/user/change-password",e)}async function d(e){await a.A.delete("/api/user/delete-user",{data:e})}async function u(){return(await a.A.get("/api/user/name")).data}},368:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},508:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]])},3490:(e,t,s)=>{"use strict";s.d(t,{A:()=>r});let a=s(5125).A.create({baseURL:"https://11job.site",headers:{"Content-Type":"application/json"},timeout:1e4});a.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let r=a},4926:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});let a=(0,s(1847).A)("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]])},6168:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>x});var a=s(5155),r=s(2115),l=s(508),c=s(4926),n=s(368),o=s(1847);let i=(0,o.A)("key-round",[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]]),d=(0,o.A)("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var u=s(130);function x(){let[e,t]=(0,r.useState)(""),[s,o]=(0,r.useState)(""),[x,m]=(0,r.useState)(""),[h,p]=(0,r.useState)(""),[f,y]=(0,r.useState)(""),[g,b]=(0,r.useState)(!1),[j,w]=(0,r.useState)(""),[N,v]=(0,r.useState)(!1),[k,A]=(0,r.useState)(!1);(0,r.useEffect)(()=>{(async()=>{try{let e=await (0,u.J3)();t(e)}catch(e){console.error("❌ 사용자 이름 조회 실패:",e),t("알 수 없는 사용자")}{let e=localStorage.getItem("userEmail");e&&o(e)}})()},[]);let S=async()=>{if(confirm("정말 로그아웃 하시겠습니까?"))try{A(!0),await (0,u.ri)(),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userEmail"),alert("로그아웃되었습니다."),window.location.href="/"}catch(e){console.error("❌ 로그아웃 실패:",e),alert("로그아웃에 실패했습니다. 잠시 후 다시 시도해 주세요.")}finally{A(!1)}},C=async()=>{if(!x||!h||!f)return void alert("현재 비밀번호와 새 비밀번호를 모두 입력해주세요.");if(h!==f)return void alert("새 비밀번호와 비밀번호 확인이 일치하지 않습니다.");if(h.length<8)return void alert("새 비밀번호는 최소 8자 이상이어야 합니다.");try{b(!0),await (0,u.ec)({oldPassword:x,newPassword:h}),alert("비밀번호가 성공적으로 변경되었습니다."),m(""),p(""),y("")}catch(e){console.error("❌ 비밀번호 변경 실패:",e),alert("비밀번호 변경에 실패했습니다. 현재 비밀번호를 다시 확인해 주세요.")}finally{b(!1)}},I=async()=>{if(!j)return void alert("회원 탈퇴를 위해 비밀번호를 입력해주세요.");if(confirm("정말로 회원 탈퇴를 진행하시겠습니까?\n\n계정과 관련된 데이터가 삭제될 수 있습니다."))try{v(!0),await (0,u.hG)({password:j}),alert("회원 탈퇴가 완료되었습니다. 이용해 주셔서 감사합니다."),localStorage.removeItem("accessToken"),localStorage.removeItem("refreshToken"),localStorage.removeItem("userEmail"),window.location.href="/"}catch(e){console.error("❌ 회원 탈퇴 실패:",e),alert("회원 탈퇴에 실패했습니다. 비밀번호를 다시 확인해 주세요.")}finally{v(!1)}},T=e?e.charAt(0).toUpperCase():"?";return(0,a.jsx)("div",{className:"flex-1 min-h-screen bg-gray-50 font-sans",children:(0,a.jsxs)("div",{className:"max-w-2xl mx-auto py-10 px-4 sm:px-6 lg:px-0 space-y-8",children:[(0,a.jsxs)("header",{className:"border-b pb-4",children:[(0,a.jsxs)("h1",{className:"text-3xl font-extrabold text-gray-900 flex items-center",children:[(0,a.jsx)(l.A,{className:"w-7 h-7 mr-3 text-blue-500"}),"마이페이지"]}),(0,a.jsx)("p",{className:"text-base text-gray-500 mt-1",children:"회원 정보 확인 및 비밀번호 변경, 회원 탈퇴를 관리할 수 있습니다."})]}),(0,a.jsxs)("section",{className:"flex items-center space-x-4 bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[(0,a.jsx)("div",{className:"w-16 h-16 rounded-full bg-blue-500 flex items-center justify-center text-white text-xl font-bold",children:T}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:e||"로그인 사용자"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:s||"이메일 정보가 없습니다."})]})]}),(0,a.jsxs)("section",{className:"space-y-2",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"계정 관리"}),(0,a.jsx)("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 divide-y divide-gray-100",children:(0,a.jsxs)("button",{className:"w-full text-left flex items-center justify-between p-4 text-red-600 hover:bg-red-50 transition duration-150 rounded-xl",onClick:S,disabled:k,children:[(0,a.jsxs)("span",{className:"flex items-center font-semibold",children:[(0,a.jsx)(c.A,{className:"w-5 h-5 mr-3 text-red-500"}),k?"로그아웃 중...":"로그아웃"]}),(0,a.jsx)(n.A,{className:"w-4 h-4 transform rotate-180 text-red-400"})]})})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(i,{className:"w-5 h-5 text-blue-500"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-gray-800",children:"비밀번호 변경"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"현재 비밀번호를 입력한 뒤, 새 비밀번호를 설정해주세요."}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"현재 비밀번호"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:x,onChange:e=>m(e.target.value),placeholder:"현재 비밀번호를 입력하세요"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"새 비밀번호"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:h,onChange:e=>p(e.target.value),placeholder:"새 비밀번호를 입력하세요 (최소 8자)"})]}),(0,a.jsxs)("div",{className:"space-y-1",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"새 비밀번호 확인"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-blue-400 focus:border-blue-400",value:f,onChange:e=>y(e.target.value),placeholder:"다시 한 번 입력해주세요"})]}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"button",onClick:C,disabled:g,className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold text-white bg-blue-600 hover:bg-blue-700 disabled:opacity-60",children:g?"변경 중...":"비밀번호 변경"})})]})]}),(0,a.jsxs)("section",{className:"bg-white rounded-xl shadow-sm border border-red-200 p-6 space-y-5",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(d,{className:"w-5 h-5 text-red-500"}),(0,a.jsx)("h3",{className:"text-lg font-bold text-red-700",children:"회원 탈퇴"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-600 leading-relaxed",children:"회원 탈퇴를 진행하면 계정과 관련된 데이터가 삭제되거나 복구가 어려울 수 있습니다. 신중하게 진행해주세요."}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-700",children:"비밀번호 확인"}),(0,a.jsx)("input",{type:"password",className:"w-full border rounded-lg px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-red-400 focus:border-red-400",value:j,onChange:e=>w(e.target.value),placeholder:"현재 비밀번호를 입력하세요"}),(0,a.jsx)("div",{className:"flex justify-end pt-2",children:(0,a.jsx)("button",{type:"button",onClick:I,disabled:N,className:"inline-flex items-center px-4 py-2 rounded-lg text-sm font-semibold text-white bg-red-600 hover:bg-red-700 disabled:opacity-60",children:N?"탈퇴 처리 중...":"회원 탈퇴"})})]})]})]})})}},8448:(e,t,s)=>{Promise.resolve().then(s.bind(s,6168))}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=8448)),_N_E=e.O()}]);