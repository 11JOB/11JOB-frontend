(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[615],{63:(e,t,a)=>{"use strict";var s=a(7260);a.o(s,"usePathname")&&a.d(t,{usePathname:function(){return s.usePathname}}),a.o(s,"useRouter")&&a.d(t,{useRouter:function(){return s.useRouter}}),a.o(s,"useSearchParams")&&a.d(t,{useSearchParams:function(){return s.useSearchParams}})},368:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("chevron-left",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},859:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]])},1360:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]])},1406:(e,t,a)=>{Promise.resolve().then(a.bind(a,4284))},3490:(e,t,a)=>{"use strict";a.d(t,{A:()=>l});let s=a(5125).A.create({baseURL:"https://11job.site",headers:{"Content-Type":"application/json"},timeout:1e4});s.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let l=s},4284:(e,t,a)=>{"use strict";a.d(t,{default:()=>k});var s=a(5155),l=a(2115),r=a(6154),n=a(9715),d=a(368),c=a(1847);let i=(0,c.A)("pencil",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}],["path",{d:"m15 5 4 4",key:"1mk7zo"}]]);var o=a(1360);let x=(0,c.A)("building-2",[["path",{d:"M10 12h4",key:"a56b0p"}],["path",{d:"M10 8h4",key:"1sr2af"}],["path",{d:"M14 21v-3a2 2 0 0 0-4 0v3",key:"1rgiei"}],["path",{d:"M6 10H4a2 2 0 0 0-2 2v7a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-2",key:"secmi2"}],["path",{d:"M6 21V5a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v16",key:"16ra0t"}]]);var m=a(6485),h=a(859);let u=(0,c.A)("download",[["path",{d:"M12 15V3",key:"m9g1x1"}],["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["path",{d:"m7 10 5 5 5-5",key:"brsn70"}]]);var p=a(5229),y=a(6191),b=a(63),g=a(6140);let f=new Date,j=e=>new Date("".concat(e,"T00:00:00")),N=e=>{let{schedule:t,onSelect:a}=e,l=j(t.scheduleDate),d=l<f,c=l.toLocaleDateString("ko-KR",{month:"2-digit",day:"2-digit"}),i=l.toLocaleDateString("ko-KR",{weekday:"short"});return(0,s.jsxs)("div",{className:"flex space-x-4 p-4 border rounded-xl ".concat(d?"bg-gray-50 border-gray-200 text-gray-500 opacity-80 cursor-pointer":"bg-white border-blue-100 shadow-sm hover:shadow-lg transition duration-200 cursor-pointer"),onClick:()=>a(t.scheduleId),role:"button",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center justify-center p-2 rounded-lg w-16 h-16 flex-shrink-0 ".concat(d?"bg-gray-200 text-gray-600":"bg-blue-500 text-white shadow-md"),children:[(0,s.jsx)("span",{className:"text-lg font-bold leading-none",children:c.replace(".","/").replace(".","")}),(0,s.jsx)("span",{className:"text-xs font-medium mt-0.5",children:i})]}),(0,s.jsxs)("div",{className:"flex flex-col space-y-1 w-full min-w-0",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)("span",{className:"text-xs font-semibold px-2 py-0.5 rounded-full border truncate ".concat(d?"bg-gray-200 text-gray-600 border-gray-300":"bg-blue-50 text-blue-700 border-blue-200"),children:t.companyName}),(0,s.jsx)("h2",{className:"text-lg font-bold text-gray-900 truncate ".concat(d?"line-through text-gray-400":""),children:t.title})]}),(0,s.jsxs)("div",{className:"flex items-start space-x-4 text-sm text-gray-600 mt-1",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(r.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{children:["세부 ",t.details.length,"개"]})]}),t.files&&t.files.length>0&&(0,s.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,s.jsx)(n.A,{className:"w-4 h-4 text-gray-400"}),(0,s.jsxs)("span",{children:["파일 ",t.files.length,"개"]})]})]})]})]})},v=e=>{let{schedules:t,onSelectSchedule:a}=e,r=(0,l.useMemo)(()=>{let e=new Date;return[...t].sort((t,a)=>{let s=j(t.scheduleDate),l=j(a.scheduleDate),r=s<e;return r!==l<e?r?1:-1:s.getTime()-l.getTime()})},[t]),n=(0,l.useMemo)(()=>r.reduce((e,t)=>{let a=t.scheduleDate;return e[a]||(e[a]=[]),e[a].push(t),e},{}),[r]),d=e=>{let{date:t,items:l}=e,r=j(t),n=f.toDateString()===r.toDateString(),d=r.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"short"});return(0,s.jsxs)("div",{className:"border-l-4 border-blue-400 pl-4 space-y-4",children:[(0,s.jsxs)("h2",{className:"text-xl font-bold ".concat(n?"text-blue-600":"text-gray-800"),children:[d," ",n&&(0,s.jsx)("span",{className:"text-sm font-medium bg-blue-100 text-blue-600 px-2 py-0.5 rounded-full ml-2",children:"오늘"})]}),(0,s.jsx)("div",{className:"space-y-3",children:l.map(e=>(0,s.jsx)(N,{schedule:e,onSelect:a},e.scheduleId))})]})};return(0,s.jsx)("div",{className:"space-y-8",children:Object.entries(n).map(e=>{let[t,a]=e;return(0,s.jsx)(d,{date:t,items:a},t)})})},w=e=>{let{schedule:t,onBack:a,onUpdate:c,onDelete:b}=e,[g,N]=(0,l.useState)(!1),[v,w]=(0,l.useState)(t),[k,A]=(0,l.useState)([]),[M,D]=(0,l.useState)([]),S=(0,l.useRef)(null),[C,I]=(0,l.useState)(!1),[P,R]=(0,l.useState)(!1);(0,l.useEffect)(()=>{w(t),N(!1),A([]),D([])},[t]);let q=j(v.scheduleDate),z=q<f,F=q.toLocaleDateString("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}),T=e=>new Date(e).toLocaleDateString("ko-KR",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}),V=async()=>{if(confirm("정말로 이 일정을 삭제하시겠습니까?\n\n[".concat(t.companyName,"] ").concat(t.title)))try{R(!0),await b(t.scheduleId)}finally{R(!1)}},E=async()=>{try{I(!0),await c({draft:v,filesToUpload:M,filesToDelete:k}),N(!1),A([]),D([])}finally{I(!1)}};return(0,s.jsxs)("div",{className:"space-y-6",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("button",{onClick:a,className:"flex items-center text-blue-600 hover:text-blue-800 transition duration-150 font-medium p-2 -ml-2 rounded-lg hover:bg-blue-50",children:[(0,s.jsx)(d.A,{className:"w-5 h-5 mr-1"}),"목록으로 돌아가기"]}),(0,s.jsx)("div",{className:"flex items-center space-x-2",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>{w(t),N(!1),A([]),D([])},className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium border border-gray-400 text-gray-600 hover:bg-gray-50",disabled:C,children:"수정 취소"}),(0,s.jsxs)("button",{onClick:E,className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium border border-blue-500 text-white bg-blue-500 hover:bg-blue-600 disabled:opacity-60",disabled:C,children:[(0,s.jsx)(i,{className:"w-4 h-4 mr-1"}),C?"저장 중...":"저장"]})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("button",{onClick:()=>N(!0),className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium border border-blue-500 text-blue-600 hover:bg-blue-50",children:[(0,s.jsx)(i,{className:"w-4 h-4 mr-1"}),"수정하기"]}),(0,s.jsxs)("button",{onClick:V,className:"inline-flex items-center px-3 py-1.5 rounded-lg text-sm font-medium border border-red-500 text-red-600 hover:bg-red-50 disabled:opacity-60",disabled:P,children:[(0,s.jsx)(o.A,{className:"w-4 h-4 mr-1"}),P?"삭제 중...":"일정 삭제"]})]})})]}),(0,s.jsxs)("header",{className:"border-b pb-4 space-y-2",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,s.jsx)(x,{className:"w-6 h-6 text-gray-500 flex-shrink-0"}),g?(0,s.jsx)("input",{className:"border rounded-md px-2 py-1 text-sm w-full max-w-xs",value:v.companyName,onChange:e=>w(t=>({...t,companyName:e.target.value}))}):(0,s.jsx)("h2",{className:"text-xl font-semibold text-gray-700",children:t.companyName})]}),g?(0,s.jsx)("input",{className:"text-3xl sm:text-4xl font-extrabold text-gray-900 border-b border-gray-200 mt-2 px-1 py-1 w-full",value:v.title,onChange:e=>w(t=>({...t,title:e.target.value}))}):(0,s.jsx)("h1",{className:"text-4xl font-extrabold text-gray-900",children:t.title})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-4 bg-blue-50 p-4 rounded-xl border border-blue-200",children:[(0,s.jsx)(m.A,{className:"w-6 h-6 text-blue-600"}),g?(0,s.jsx)("input",{type:"date",className:"border rounded-md px-2 py-1 text-sm",value:v.scheduleDate,onChange:e=>w(t=>({...t,scheduleDate:e.target.value}))}):(0,s.jsx)("div",{className:"text-lg font-bold text-blue-800",children:F}),(0,s.jsx)("span",{className:"text-sm font-bold px-3 py-1 rounded-full ml-auto ".concat(z?"bg-red-100 text-red-700":"bg-green-100 text-green-700"),children:z?"종료된 일정":"예정된 일정"})]}),(0,s.jsxs)("section",{className:"space-y-4",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 border-b pb-2 flex items-center",children:[(0,s.jsx)(r.A,{className:"w-5 h-5 mr-2 text-yellow-600"}),"세부 준비 사항"]}),(0,s.jsx)("div",{className:"space-y-4",children:v.details.map((e,t)=>(0,s.jsx)("div",{className:"bg-gray-50 p-4 rounded-lg border border-gray-200 space-y-2",children:g?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("input",{className:"text-sm font-semibold text-gray-700 border rounded-md px-2 py-1 w-full",value:e.title,onChange:e=>{let a=e.target.value;w(e=>({...e,details:e.details.map((e,s)=>s===t?{...e,title:a}:e)}))}}),(0,s.jsx)("textarea",{className:"text-base text-gray-600 whitespace-pre-wrap border rounded-md px-2 py-1 w-full min-h-[80px]",value:e.content,onChange:e=>{let a=e.target.value;w(e=>({...e,details:e.details.map((e,s)=>s===t?{...e,content:a}:e)}))}})]}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("p",{className:"text-sm font-semibold text-gray-700 mb-1",children:e.title}),(0,s.jsx)("p",{className:"text-base text-gray-600 whitespace-pre-wrap",children:e.content})]})},e.detailId))})]}),(0,s.jsxs)("section",{className:"space-y-4 pt-4 border-t",children:[(0,s.jsxs)("h3",{className:"text-2xl font-bold text-gray-800 border-b pb-2 flex items-center",children:[(0,s.jsx)(n.A,{className:"w-5 h-5 mr-2 text-purple-600"}),"첨부 파일"]}),(0,s.jsxs)("ul",{className:"space-y-2",children:[0===t.files.length&&(0,s.jsx)("li",{className:"text-sm text-gray-400",children:"등록된 파일이 없습니다."}),t.files.map(e=>{let t=k.includes(e.fileId);return(0,s.jsxs)("li",{className:"flex items-center justify-between p-3 rounded-lg border ".concat(t?"bg-red-50 border-red-200":"bg-purple-50 border-purple-200"),children:[(0,s.jsxs)("span",{className:"text-sm font-medium flex items-center",children:[(0,s.jsx)(h.A,{className:"w-4 h-4 mr-2 ".concat(t?"text-red-500":"text-purple-600")}),(0,s.jsx)("span",{className:t?"line-through text-red-600":"text-purple-800",children:e.originalName})]}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[!t&&(0,s.jsxs)("button",{type:"button",className:"flex items-center text-purple-600 hover:text-purple-800 text-xs font-bold",onClick:()=>{window.open(e.filePath,"_blank")},children:[(0,s.jsx)(u,{className:"w-3 h-3 mr-1"}),"열기"]}),g&&(0,s.jsxs)("button",{type:"button",onClick:()=>(e=>{A(t=>t.includes(e)?t.filter(t=>t!==e):[...t,e])})(e.fileId),className:"flex items-center text-xs font-bold ".concat(t?"text-gray-600 hover:text-gray-800":"text-red-600 hover:text-red-800"),children:[(0,s.jsx)(p.A,{className:"w-3 h-3 mr-1"}),t?"삭제 취소":"삭제"]})]})]},e.fileId)})]}),g&&(0,s.jsxs)("div",{className:"space-y-3",children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)("input",{ref:S,type:"file",multiple:!0,className:"hidden",onChange:e=>{if(!e.target.files)return;let t=Array.from(e.target.files);D(e=>[...e,...t]),e.target.value=""}}),(0,s.jsxs)("button",{type:"button",onClick:()=>{var e;return null==(e=S.current)?void 0:e.click()},className:"inline-flex items-center px-3 py-1.5 rounded-lg text-xs font-medium border border-dashed border-purple-400 text-purple-600 hover:bg-purple-50",children:[(0,s.jsx)(y.A,{className:"w-3 h-3 mr-1"}),"파일 추가"]}),M.length>0&&(0,s.jsxs)("span",{className:"text-xs text-gray-500",children:["새로 추가된 파일 ",M.length,"개"]})]}),M.length>0&&(0,s.jsx)("ul",{className:"space-y-1 pl-1",children:M.map((e,t)=>(0,s.jsxs)("li",{className:"flex items-center justify-between text-xs bg-white border border-purple-100 rounded-md px-2 py-1",children:[(0,s.jsx)("span",{className:"truncate mr-2",children:e.name}),(0,s.jsx)("button",{type:"button",onClick:()=>{D(e=>e.filter((e,a)=>a!==t))},className:"text-red-500 hover:text-red-700",children:(0,s.jsx)(p.A,{className:"w-3 h-3"})})]},"".concat(e.name,"-").concat(t)))})]})]}),(0,s.jsxs)("footer",{className:"pt-4 border-t text-sm text-gray-500 space-y-1",children:[(0,s.jsxs)("p",{children:["생성일: ",T(t.createdDate)]}),(0,s.jsxs)("p",{children:["최종 업데이트일: ",T(t.updatedDate)]}),(0,s.jsxs)("p",{children:["스케줄 ID: ",t.scheduleId," | 회사 ID: ",t.companyId]})]})]})};function k(){let e=(0,b.useRouter)(),t=(0,b.useSearchParams)().get("scheduleId"),a=null!==t?Number(t):null,[r,n]=(0,l.useState)([]),[d,c]=(0,l.useState)(!0),[i,o]=(0,l.useState)(null);(0,l.useEffect)(()=>{(async()=>{try{c(!0),o(null);let e=await (0,g.qP)({page:0,size:100});n(e)}catch(e){console.error("❌ 일정 목록 조회 실패:",e),o("일정 목록을 불러오지 못했습니다.")}finally{c(!1)}})()},[]);let x=(0,l.useMemo)(()=>{if(Array.isArray(r)&&!(null==a||Number.isNaN(a)))return r.find(e=>e.scheduleId===a)},[a,r]),h=async e=>{let{draft:t,filesToUpload:a,filesToDelete:s}=e;try{let e={companyName:t.companyName,title:t.title,scheduleDate:t.scheduleDate,details:t.details.map(e=>({detailId:e.detailId,detailTitle:e.title,detailContent:e.content})),filesToDelete:s};await (0,g.Fs)(t.scheduleId,e,a);let l=await (0,g.qP)({page:0,size:100});n(l),alert("일정이 수정되었습니다.")}catch(e){console.error("❌ 일정 수정 실패:",e),alert("일정을 수정하지 못했습니다. 다시 시도해 주세요.")}},u=async t=>{try{await (0,g.VD)(t),n(e=>e.filter(e=>e.scheduleId!==t)),e.push("/view"),alert("일정이 삭제되었습니다.")}catch(e){console.error("❌ 일정 삭제 실패:",e),alert("일정을 삭제하지 못했습니다. 다시 시도해 주세요.")}};return(0,s.jsx)("div",{className:"flex-1 p-4 sm:p-8 min-h-screen bg-gray-50",children:(0,s.jsxs)("div",{className:"bg-white p-4 sm:p-8 rounded-2xl shadow-xl h-full max-w-4xl mx-auto space-y-6",children:[(0,s.jsxs)("header",{className:"border-b border-gray-100 pb-4",children:[(0,s.jsxs)("h1",{className:"text-3xl font-extrabold text-gray-900 flex items-center",children:[(0,s.jsx)(m.A,{className:"w-7 h-7 mr-3 text-blue-500"}),"채용 일정 관리"]}),(0,s.jsx)("p",{className:"text-base text-gray-500 mt-1",children:x?"선택된 일정의 상세 정보를 확인하고 수정합니다.":"등록된 일정을 시간 순서로 확인합니다."})]}),d&&(0,s.jsx)("p",{className:"text-gray-500",children:"일정 목록을 불러오는 중..."}),!d&&i&&(0,s.jsx)("p",{className:"text-red-500 text-sm",children:i}),!d&&!i&&!x&&0===r.length&&(0,s.jsx)("p",{className:"text-gray-400 text-sm",children:"등록된 일정이 없습니다."}),!d&&!i&&!x&&r.length>0&&(0,s.jsx)(v,{schedules:r,onSelectSchedule:t=>{e.push("/view?scheduleId=".concat(t))}}),!d&&!i&&x&&(0,s.jsx)(w,{schedule:x,onBack:()=>{e.push("/view")},onUpdate:h,onDelete:u})]})})}},5229:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},6140:(e,t,a)=>{"use strict";a.d(t,{Fs:()=>n,VD:()=>d,qP:()=>r,sF:()=>l});var s=a(3490);async function l(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=new FormData;return a.append("dto",new Blob([JSON.stringify(e)],{type:"application/json"})),t.forEach(e=>a.append("files",e)),(await s.A.post("/api/schedules",a,{headers:{"Content-Type":"multipart/form-data"}})).data.data}async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(await s.A.get("/api/schedules",{params:e})).data;return Array.isArray(t)?t:[t]}async function n(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],l=new FormData;l.append("dto",new Blob([JSON.stringify(t)],{type:"application/json"})),a.forEach(e=>l.append("files",e)),await s.A.put("/api/schedules/".concat(e),l,{headers:{"Content-Type":"multipart/form-data"}})}async function d(e){await s.A.delete("/api/schedules/".concat(e))}},6154:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]])},6191:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},6485:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]])},9715:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let s=(0,a(1847).A)("file-text",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]])}},e=>{e.O(0,[211,441,255,358],()=>e(e.s=1406)),_N_E=e.O()}]);