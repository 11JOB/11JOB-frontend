(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{3490:(e,t,l)=>{"use strict";l.d(t,{A:()=>s});let a=l(5125).A.create({baseURL:"https://11job.site",headers:{"Content-Type":"application/json"},timeout:1e4});a.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let s=a},4911:(e,t,l)=>{Promise.resolve().then(l.bind(l,7235))},7235:(e,t,l)=>{"use strict";l.r(t),l.d(t,{default:()=>y});var a=l(5155),s=l(2115),r=l(1285),o=l(4334),n=l(3730),d=l(5507),i=l(5229),c=l(9715),x=l(6485),b=l(6826),m=l(1360),u=l(3490);async function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],l=new FormData;return l.append("dto",new Blob([JSON.stringify(e)],{type:"application/json"})),t.forEach(e=>l.append("files",e)),(await u.A.post("/api/schedules",l,{headers:{"Content-Type":"multipart/form-data"}})).data.data}let p=e=>{let{selectedDate:t,isOpen:l,onClose:s,onDateSelect:o}=e;return l?(0,a.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50 backdrop-blur-sm",onClick:s,children:(0,a.jsxs)("div",{className:"bg-white p-6 max-w-xs mx-auto rounded-3xl shadow-2xl relative border-t-4 border-blue-500",onClick:e=>e.stopPropagation(),children:[(0,a.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-1 rounded-full text-gray-400 hover:bg-gray-100",children:(0,a.jsx)(i.A,{className:"h-6 w-6",strokeWidth:2.5})}),(0,a.jsx)("h3",{className:"text-2xl font-extrabold text-gray-800 mb-6 text-center",children:"일정 날짜 선택"}),(0,a.jsx)(r.h,{mode:"single",selected:t,onDayClick:e=>{o(e),s()},locale:d.ko,classNames:{root:"w-full",caption:"flex justify-between items-center mb-4 px-2",caption_label:"font-extrabold text-xl text-gray-800",nav_button_previous:"p-2 rounded-full hover:bg-gray-200",nav_button_next:"p-2 rounded-full hover:bg-gray-200",head_cell:"text-gray-500 font-semibold text-sm pt-2 pb-1",day:"rounded-full p-2 text-center text-sm font-medium hover:bg-blue-100",day_selected:"bg-blue-500 text-white hover:bg-blue-600",day_today:"border-2 border-blue-500 text-blue-500 font-bold",day_outside:"text-gray-400 opacity-60"}})]})}):null},g=e=>{let{detail:t,index:l,onChange:s,onRemove:r,isRemovable:o}=e;return(0,a.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-inner space-y-3 border border-gray-100 relative",children:[(0,a.jsxs)("h4",{className:"text-base font-bold text-blue-700 mb-3",children:["세부 항목 ",l+1]}),o&&(0,a.jsx)("button",{type:"button",onClick:()=>r(t.id),className:"absolute top-3 right-3 p-1 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50",children:(0,a.jsx)(i.A,{className:"h-4 w-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"제목"}),(0,a.jsx)("input",{type:"text",value:t.title,onChange:e=>s(t.id,"title",e.target.value),className:"w-full border border-gray-300 rounded-lg p-3"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"내용"}),(0,a.jsx)("textarea",{rows:3,value:t.content,onChange:e=>s(t.id,"content",e.target.value),className:"w-full border border-gray-300 rounded-lg p-3 resize-y"})]})]})};function y(){let e=new Date,t=e=>{window.location.href=e},[l,r]=(0,s.useState)({date:e,mainTitle:"",details:[{id:1,title:"",content:""}],files:[],companyName:"(기업명)"}),[u,y]=(0,s.useState)(2),[j,N]=(0,s.useState)(!1),[v,w]=(0,s.useState)(!0);(0,s.useEffect)(()=>{let e=sessionStorage.getItem("selectedJob");if(!e)return void w(!1);try{let t=JSON.parse(e);if(r(e=>({...e,companyName:t.companyName,mainTitle:"".concat(t.companyName," - ").concat(t.title)})),t.expirationDate){let e=(0,o.qg)(t.expirationDate,"yyyy-MM-dd",new Date);isNaN(e.getTime())||r(t=>({...t,date:e}))}}catch(e){console.error("selectedJob 파싱 실패:",e),w(!1)}},[]);let k=e=>r(t=>({...t,date:e})),C=(e,t,l)=>{r(a=>({...a,details:a.details.map(a=>a.id===e?{...a,[t]:l}:a)}))},D=e=>{r(t=>({...t,details:t.details.filter(t=>t.id!==e)}))},_=async e=>{e.preventDefault();let t={companyName:l.companyName,title:l.mainTitle,scheduleDate:(0,n.GP)(l.date,"yyyy-MM-dd"),details:l.details.map(e=>({detailId:e.id,detailTitle:e.title,detailContent:e.content})),filesToDelete:[]},a=new FormData;for(let[e,s]of(a.append("dto",new Blob([JSON.stringify(t)],{type:"application/json"})),l.files.forEach(e=>{a.append("files",e)}),a.entries()))console.log("FormData:",e,s);try{await h(t,l.files)}catch(e){console.error("일정 등록 중 오류 발생:",e),alert("일정 등록에 실패했습니다.")}};return v?(0,a.jsxs)("div",{className:"flex-1 p-4 sm:p-8",children:[(0,a.jsxs)("div",{className:"bg-white p-6 sm:p-10 rounded-3xl shadow-2xl h-full max-w-4xl mx-auto border-t-8 border-blue-600",children:[(0,a.jsx)("header",{className:"border-b border-gray-100 pb-4 mb-8",children:(0,a.jsxs)("h1",{className:"text-3xl font-extrabold text-gray-900",children:[(0,a.jsx)("span",{className:"text-blue-600",children:l.companyName})," 세부 일정 등록"]})}),(0,a.jsxs)("form",{onSubmit:_,className:"space-y-12",children:[(0,a.jsxs)("section",{className:"p-6 bg-blue-50 rounded-xl border-l-4 border-blue-400 shadow-inner space-y-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-blue-700 flex items-center space-x-2",children:[(0,a.jsx)(c.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:"기본 일정 정보"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-base font-semibold text-gray-700 mb-2",children:"날짜"}),(0,a.jsxs)("div",{className:"relative flex items-center max-w-sm border border-gray-300 rounded-xl p-3 bg-white shadow-sm",children:[(0,a.jsx)("input",{type:"text",readOnly:!0,value:(0,n.GP)(l.date,"yyyy년 M월 d일 (EEE)",{locale:d.ko}),className:"flex-1 outline-none bg-transparent text-lg text-gray-800 font-bold"}),(0,a.jsx)("button",{type:"button",onClick:()=>N(!0),className:"p-2 ml-3 rounded-full text-blue-500 hover:bg-blue-100",children:(0,a.jsx)(x.A,{className:"h-6 w-6"})}),(0,a.jsx)("button",{type:"button",onClick:()=>k(e),className:"p-2 ml-1 rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50",children:(0,a.jsx)(i.A,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-base font-semibold text-gray-700 mb-2",children:"일정 제목"}),(0,a.jsx)("input",{type:"text",value:l.mainTitle,onChange:e=>r(t=>({...t,mainTitle:e.target.value})),className:"w-full border border-gray-300 rounded-xl p-3 text-lg"})]})]}),(0,a.jsxs)("section",{className:"space-y-6",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-800 border-b border-gray-200 pb-2 flex justify-between items-center",children:[(0,a.jsx)("span",{children:"세부 준비 항목"}),(0,a.jsxs)("button",{type:"button",onClick:()=>{r(e=>({...e,details:[...e.details,{id:u,title:"",content:""}]})),y(e=>e+1)},className:"flex items-center space-x-1 px-3 py-1 bg-blue-500 text-white text-sm font-bold rounded-full hover:bg-blue-600 shadow-md shadow-blue-200",children:[(0,a.jsx)(b.A,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"항목 추가"})]})]}),(0,a.jsx)("div",{className:"space-y-6 bg-gray-50 p-4 rounded-xl border border-gray-100",children:l.details.map((e,t)=>(0,a.jsx)(g,{detail:e,index:t,onChange:C,onRemove:D,isRemovable:l.details.length>1},e.id))})]}),(0,a.jsxs)("section",{className:"p-6 bg-gray-50 rounded-xl border-l-4 border-gray-400 space-y-4",children:[(0,a.jsxs)("h2",{className:"text-xl font-bold text-gray-700 flex items-center space-x-2",children:[(0,a.jsx)(c.A,{className:"w-6 h-6"}),(0,a.jsx)("span",{children:"참고 파일 업로드 (다중 파일 지원)"})]}),(0,a.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center text-gray-500 relative",children:[(0,a.jsx)("input",{id:"file-upload",type:"file",multiple:!0,onChange:e=>{let t=e.target.files;if(!t)return;let l=Array.from(t).filter(e=>e instanceof File);r(e=>({...e,files:[...e.files,...l]})),e.target.value=""},className:"absolute inset-0 opacity-0 cursor-pointer"}),(0,a.jsx)("p",{className:"mb-4",children:"이력서, 포트폴리오 등 관련 파일을 선택하세요."}),(0,a.jsx)("label",{htmlFor:"file-upload",className:"mt-4 px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 inline-block cursor-pointer",children:"파일 선택/추가"}),l.files.length>0&&(0,a.jsxs)("div",{className:"mt-6 space-y-2 text-left bg-white p-4 rounded-lg border",children:[(0,a.jsxs)("p",{className:"font-semibold text-gray-700",children:["선택된 파일 (",l.files.length,"개)"]}),l.files.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md text-sm text-gray-700 border",children:[(0,a.jsxs)("span",{className:"truncate max-w-[80%]",children:[e.name," (",f(e.size),")"]}),(0,a.jsx)("button",{type:"button",onClick:()=>{r(e=>({...e,files:e.files.filter((e,l)=>l!==t)}))},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-full",children:(0,a.jsx)(m.A,{className:"w-4 h-4"})})]},"".concat(e.name,"-").concat(t)))]})]})]}),(0,a.jsx)("div",{className:"flex justify-center pt-8 border-t border-gray-100",children:(0,a.jsx)("button",{type:"submit",className:"w-full max-w-sm px-8 py-4 bg-orange-500 text-white text-xl font-extrabold rounded-full hover:bg-orange-600 shadow-2xl shadow-orange-300",children:"\uD83D\uDE80 일정 등록 완료"})})]})]}),(0,a.jsx)(p,{selectedDate:l.date,isOpen:j,onClose:()=>N(!1),onDateSelect:k})]}):(0,a.jsx)("div",{className:"flex-1 p-8 min-h-screen flex items-center justify-center bg-gray-50",children:(0,a.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl text-center space-y-4",children:[(0,a.jsx)("p",{className:"text-xl font-bold text-gray-800",children:"선택된 채용 공고가 없습니다."}),(0,a.jsx)("p",{className:"text-gray-500",children:"채용 공고 리스트에서 “세부 일정 등록” 버튼을 눌러 들어와 주세요."}),(0,a.jsx)("button",{onClick:()=>t("/list"),className:"px-5 py-2 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600",children:"공고 리스트로 가기"})]})})}let f=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["Bytes","KB","MB","GB","TB"][t])}}},e=>{e.O(0,[211,899,743,441,255,358],()=>e(e.s=4911)),_N_E=e.O()}]);