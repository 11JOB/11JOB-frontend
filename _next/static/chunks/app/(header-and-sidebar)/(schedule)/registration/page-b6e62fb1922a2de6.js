(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[511],{2768:(e,t,a)=>{"use strict";a.d(t,{A:()=>r});var l=a(5155),s=a(63);function r(e){let{message:t,route:a,pagemessage:r,onClose:n}=e,o=(0,s.useRouter)();return(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/40 backdrop-blur-sm",children:(0,l.jsxs)("div",{className:"bg-white w-full max-w-sm rounded-2xl shadow-2xl p-6 animate-fadeIn scale-100",children:[(0,l.jsx)("h2",{className:"text-xl font-bold text-gray-900 mb-3",children:"알림"}),(0,l.jsx)("p",{className:"text-gray-600 text-sm leading-relaxed whitespace-pre-line",children:t}),(0,l.jsx)("div",{className:"mt-6 flex justify-end",children:a?(0,l.jsxs)("button",{onClick:()=>{n&&n(),a&&(o.push(a),o.refresh())},className:"px-4 py-2 rounded-lg bg-indigo-600 text-white font-semibold text-sm shadow-md hover:bg-indigo-700 active:scale-95 transition-all",children:[r," 이동하기"]}):(0,l.jsx)("button",{onClick:n,className:"px-4 py-2 rounded-lg bg-gray-600 text-white font-semibold text-sm shadow-md hover:bg-gray-700 active:scale-95 transition-all",children:"닫기"})})]})})}},3490:(e,t,a)=>{"use strict";a.d(t,{A:()=>s});let l=a(5125).A.create({baseURL:"https://11job.site",headers:{"Content-Type":"application/json"},timeout:1e4});l.interceptors.request.use(e=>{let t=localStorage.getItem("accessToken");return t&&(e.headers.Authorization="Bearer ".concat(t)),e},e=>Promise.reject(e));let s=l},4911:(e,t,a)=>{Promise.resolve().then(a.bind(a,9592))},6140:(e,t,a)=>{"use strict";a.d(t,{Fs:()=>n,VD:()=>o,qP:()=>r,sF:()=>s});var l=a(3490);async function s(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=new FormData;return a.append("dto",new Blob([JSON.stringify(e)],{type:"application/json"})),t.forEach(e=>a.append("files",e)),(await l.A.post("/api/schedules",a,{headers:{"Content-Type":"multipart/form-data"}})).data.data}async function r(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=(await l.A.get("/api/schedules",{params:e})).data;return Array.isArray(t)?t:[t]}async function n(e,t){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=new FormData;s.append("dto",new Blob([JSON.stringify(t)],{type:"application/json"})),a.forEach(e=>s.append("files",e)),await l.A.put("/api/schedules/".concat(e),s,{headers:{"Content-Type":"multipart/form-data"}})}async function o(e){await l.A.delete("/api/schedules/".concat(e))}},9592:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>g});var l=a(5155),s=a(2115),r=a(1285),n=a(4334),o=a(3730),i=a(5507),d=a(5229),c=a(9715),x=a(6485),m=a(6826),b=a(1360),u=a(6140),h=a(2768);let p=e=>{let{selectedDate:t,isOpen:a,onClose:s,onDateSelect:n}=e;return a?(0,l.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-[#ffffff60] backdrop-blur-sm",onClick:s,children:(0,l.jsxs)("div",{className:"bg-white p-6 max-w-xs mx-auto rounded-3xl shadow-2xl relative border-t-4 border-blue-500",onClick:e=>e.stopPropagation(),children:[(0,l.jsx)("button",{onClick:s,className:"absolute top-4 right-4 p-1 rounded-full text-gray-400 hover:bg-gray-100",children:(0,l.jsx)(d.A,{className:"h-6 w-6",strokeWidth:2.5})}),(0,l.jsx)("h3",{className:"text-2xl font-extrabold text-gray-800 mb-6 text-center",children:"일정 날짜 선택"}),(0,l.jsx)(r.h,{mode:"single",selected:t,onDayClick:e=>{n(e),s()},locale:i.ko,classNames:{root:"w-full",caption:"flex justify-between items-center mb-4 px-2",caption_label:"font-extrabold text-xl text-gray-800",nav_button_previous:"p-2 rounded-full hover:bg-gray-200",nav_button_next:"p-2 rounded-full hover:bg-gray-200",head_cell:"text-gray-500 font-semibold text-sm pt-2 pb-1",day:"rounded-full p-2 text-center text-sm font-medium hover:bg-blue-100",day_selected:"bg-blue-500 text-white hover:bg-blue-600",day_today:"border-2 border-blue-500 text-blue-500 font-bold",day_outside:"text-gray-400 opacity-60"}})]})}):null},f=e=>{let{detail:t,index:a,onChange:s,onRemove:r,isRemovable:n}=e;return(0,l.jsxs)("div",{className:"bg-white p-5 rounded-xl shadow-inner space-y-3 border border-gray-100 relative",children:[(0,l.jsxs)("h4",{className:"text-base font-bold text-blue-700 mb-3",children:["세부 항목 ",a+1]}),n&&(0,l.jsx)("button",{type:"button",onClick:()=>r(t.id),className:"absolute top-3 right-3 p-1 text-gray-400 hover:text-red-500 rounded-full hover:bg-red-50",children:(0,l.jsx)(d.A,{className:"h-4 w-4"})}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"제목"}),(0,l.jsx)("input",{type:"text",value:t.title,onChange:e=>s(t.id,"title",e.target.value),className:"w-full border border-gray-300 rounded-lg p-3"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"내용"}),(0,l.jsx)("textarea",{rows:3,value:t.content,onChange:e=>s(t.id,"content",e.target.value),className:"w-full border border-gray-300 rounded-lg p-3 resize-y"})]})]})};function g(){let e=new Date,t=e=>{window.location.href=e};(0,s.useEffect)(()=>{localStorage.getItem("accessToken")||(window.location.href="/auth")},[]);let[a,r]=(0,s.useState)({date:e,mainTitle:"",details:[{id:1,title:"",content:""}],files:[],companyName:"(기업명)"}),[g,j]=(0,s.useState)(2),[N,w]=(0,s.useState)(!1),[v,k]=(0,s.useState)(!0),[C,A]=(0,s.useState)(null);(0,s.useEffect)(()=>{let e=sessionStorage.getItem("selectedJob");if(!e)return void k(!1);try{let t=JSON.parse(e);if(r(e=>({...e,companyName:t.companyName,mainTitle:"".concat(t.companyName," - ").concat(t.title)})),t.expirationDate){let e=(0,n.qg)(t.expirationDate,"yyyy-MM-dd",new Date);isNaN(e.getTime())||r(t=>({...t,date:e}))}}catch(e){console.error("selectedJob 파싱 실패:",e),k(!1)}},[]);let D=e=>r(t=>({...t,date:e})),_=(e,t,a)=>{r(l=>({...l,details:l.details.map(l=>l.id===e?{...l,[t]:a}:l)}))},B=e=>{r(t=>({...t,details:t.details.filter(t=>t.id!==e)}))},M=async e=>{e.preventDefault();let t={companyName:a.companyName,title:a.mainTitle,scheduleDate:(0,o.GP)(a.date,"yyyy-MM-dd"),details:a.details.map(e=>({detailId:e.id,detailTitle:e.title,detailContent:e.content})),filesToDelete:[]},l=new FormData;for(let[e,s]of(l.append("dto",new Blob([JSON.stringify(t)],{type:"application/json"})),a.files.forEach(e=>{l.append("files",e)}),l.entries()))console.log("FormData:",e,s);try{await (0,u.sF)(t,a.files),A("일정이 성공적으로 등록되었습니다!")}catch(e){console.error("일정 등록 중 오류 발생:",e),A("일정 등록 중 오류가 발생했습니다.")}};return v?(0,l.jsxs)("div",{className:"flex-1 p-4 sm:p-8",children:[(0,l.jsxs)("div",{className:"bg-white p-6 sm:p-10 rounded-3xl shadow-2xl h-full max-w-4xl mx-auto border-t-8 border-blue-600",children:[(0,l.jsx)("header",{className:"border-b border-gray-100 pb-4 mb-8",children:(0,l.jsxs)("h1",{className:"text-3xl font-extrabold text-gray-900",children:[(0,l.jsx)("span",{className:"text-blue-600",children:a.companyName})," 세부 일정 등록"]})}),(0,l.jsxs)("form",{onSubmit:M,className:"space-y-12",children:[(0,l.jsxs)("section",{className:"p-6 bg-blue-50 rounded-xl border-l-4 border-blue-400 shadow-inner space-y-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-blue-700 flex items-center space-x-2",children:[(0,l.jsx)(c.A,{className:"w-6 h-6"}),(0,l.jsx)("span",{children:"기본 일정 정보"})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-base font-semibold text-gray-700 mb-2",children:"날짜"}),(0,l.jsxs)("div",{className:"relative flex items-center max-w-sm border border-gray-300 rounded-xl p-3 bg-white shadow-sm",children:[(0,l.jsx)("input",{type:"text",readOnly:!0,value:(0,o.GP)(a.date,"yyyy년 M월 d일 (EEE)",{locale:i.ko}),className:"flex-1 outline-none bg-transparent text-lg text-gray-800 font-bold"}),(0,l.jsx)("button",{type:"button",onClick:()=>w(!0),className:"p-2 ml-3 rounded-full text-blue-500 hover:bg-blue-100",children:(0,l.jsx)(x.A,{className:"h-6 w-6"})}),(0,l.jsx)("button",{type:"button",onClick:()=>D(e),className:"p-2 ml-1 rounded-full text-gray-400 hover:text-red-500 hover:bg-red-50",children:(0,l.jsx)(d.A,{className:"h-5 w-5"})})]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-base font-semibold text-gray-700 mb-2",children:"일정 제목"}),(0,l.jsx)("input",{type:"text",value:a.mainTitle,onChange:e=>r(t=>({...t,mainTitle:e.target.value})),className:"w-full border border-gray-300 rounded-xl p-3 text-lg"})]})]}),(0,l.jsxs)("section",{className:"space-y-6",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-gray-800 border-b border-gray-200 pb-2 flex justify-between items-center",children:[(0,l.jsx)("span",{children:"세부 준비 항목"}),(0,l.jsxs)("button",{type:"button",onClick:()=>{r(e=>({...e,details:[...e.details,{id:g,title:"",content:""}]})),j(e=>e+1)},className:"flex items-center space-x-1 px-3 py-1 bg-blue-500 text-white text-sm font-bold rounded-full hover:bg-blue-600 shadow-md shadow-blue-200",children:[(0,l.jsx)(m.A,{className:"w-4 h-4"}),(0,l.jsx)("span",{children:"항목 추가"})]})]}),(0,l.jsx)("div",{className:"space-y-6 bg-gray-50 p-4 rounded-xl border border-gray-100",children:a.details.map((e,t)=>(0,l.jsx)(f,{detail:e,index:t,onChange:_,onRemove:B,isRemovable:a.details.length>1},e.id))})]}),(0,l.jsxs)("section",{className:"p-6 bg-gray-50 rounded-xl border-l-4 border-gray-400 space-y-4",children:[(0,l.jsxs)("h2",{className:"text-xl font-bold text-gray-700 flex items-center space-x-2",children:[(0,l.jsx)(c.A,{className:"w-6 h-6"}),(0,l.jsx)("span",{children:"참고 파일 업로드 (다중 파일 지원)"})]}),(0,l.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-6 text-center text-gray-500 relative",children:[(0,l.jsx)("input",{id:"file-upload",type:"file",multiple:!0,onChange:e=>{let t=e.target.files;if(!t)return;let l=Array.from(t).filter(e=>e instanceof File);for(let e of l)if(e.size>0xa00000)return void alert('파일 "'.concat(e.name,'"은(는) 10MB를 초과할 수 없습니다.'));if([...a.files,...l].reduce((e,t)=>e+t.size,0)>0x3200000)return void alert("전체 파일 크기는 50MB를 초과할 수 없습니다.");r(e=>({...e,files:[...e.files,...l]})),e.target.value=""},className:"hidden"}),(0,l.jsxs)("p",{className:"mb-4",children:["이력서, 포트폴리오 등 관련 파일을 선택하세요.",(0,l.jsx)("br",{}),"한 파일당 10MB이하, 전체 50MB이하로 업로드 가능합니다."]}),(0,l.jsx)("label",{htmlFor:"file-upload",className:"mt-4 px-4 py-2 bg-gray-200 text-gray-700 font-semibold rounded-lg hover:bg-gray-300 inline-block cursor-pointer",children:"파일 선택/추가"}),a.files.length>0&&(0,l.jsxs)("div",{className:"mt-6 space-y-2 text-left bg-white p-4 rounded-lg border",children:[(0,l.jsxs)("p",{className:"font-semibold text-gray-700",children:["선택된 파일 (",a.files.length,"개)"]}),a.files.map((e,t)=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-2 bg-gray-50 rounded-md text-sm text-gray-700 border",children:[(0,l.jsxs)("span",{className:"truncate max-w-[80%]",children:[e.name," (",y(e.size),")"]}),(0,l.jsxs)("button",{type:"button",onClick:e=>{e.stopPropagation(),console.log("Removing file at index:",t),r(e=>{let a=e.files.filter((e,a)=>a!==t);return console.log("Updated files:",a),{...e,files:a}})},className:"p-1 text-red-400 hover:text-red-600 hover:bg-red-50 rounded-full",children:[(0,l.jsx)(b.A,{className:"w-4 h-4"})," "]})]},"".concat(e.name,"-").concat(t)))]})]})]}),(0,l.jsx)("div",{className:"flex justify-center pt-8 border-t border-gray-100",children:(0,l.jsx)("button",{type:"submit",className:"w-full max-w-sm px-8 py-4 bg-orange-500 text-white text-xl font-extrabold rounded-full hover:bg-orange-600 shadow-2xl shadow-orange-300",children:"\uD83D\uDE80 일정 등록 완료"})})]})]}),(0,l.jsx)(p,{selectedDate:a.date,isOpen:N,onClose:()=>w(!1),onDateSelect:D}),C&&(0,l.jsx)(h.A,{message:C,route:"/list"})]}):(0,l.jsx)("div",{className:"flex-1 p-8 min-h-screen flex items-center justify-center bg-gray-50",children:(0,l.jsxs)("div",{className:"bg-white p-8 rounded-2xl shadow-xl text-center space-y-4",children:[(0,l.jsx)("p",{className:"text-xl font-bold text-gray-800",children:"선택된 채용 공고가 없습니다."}),(0,l.jsx)("p",{className:"text-gray-500",children:"채용 공고 리스트에서 “세부 일정 등록” 버튼을 눌러 들어와 주세요."}),(0,l.jsx)("button",{onClick:()=>t("/list"),className:"px-5 py-2 bg-blue-500 text-white font-bold rounded-lg hover:bg-blue-600",children:"공고 리스트로 가기"})]})})}let y=e=>{if(0===e)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return"".concat(parseFloat((e/Math.pow(1024,t)).toFixed(2))," ").concat(["Bytes","KB","MB","GB","TB"][t])}}},e=>{e.O(0,[211,895,743,441,255,358],()=>e(e.s=4911)),_N_E=e.O()}]);